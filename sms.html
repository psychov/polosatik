<head>
<title>Генерация текста SMS для получения коронапропуска (Москва/МО)</title>
<script type="text/javascript">
function toggle_visibility(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
}
function form_pass(){ 
   var pt = 0;
   var it = 0;
   var ps = document.getElementById("passport_ser").value;
   var pn = document.getElementById("passport_num").value;
   var vn = document.getElementById("vehicle_reg_num").value;
   var tn = document.getElementById("troyka_num").value;
   var sn = document.getElementById("strelka_num").value;
   var ji = document.getElementById("job_inn").value;
   var jn = document.getElementById("job_name").value;
   var bd = document.getElementById("birthday").value;
   var hs = document.getElementById("hospital").value;
   var rs = document.getElementById("reason").value;
   var da = document.getElementById("dest_address").value;

   if (document.getElementById("pass_type1").checked == true){pt = 1}
   if (document.getElementById("pass_type2").checked == true){pt = 2}
   if (document.getElementById("pass_type3").checked == true){pt = 3}

   if (document.getElementById("passport_type_1").checked == true){it = 1}
   if (document.getElementById("passport_type_2").checked == true){it = 2}
   if (document.getElementById("passport_type_3").checked == true){it = 3}

   var smsfulltext = "";

   switch (pt) {
    case 1: document.getElementById('job_inn').disabled = false;
            document.getElementById('job_name').disabled = false;
	    document.getElementById('birthday').disabled = true;
	    document.getElementById('hospital').disabled = true;
	    document.getElementById('reason').disabled = true;
	    document.getElementById('dest_address').disabled = true;
	    if (ji == "" || jn == "" || ps == "" || pn == ""){ 
              smsfulltext = "Недостаточно данных";
            } else {
              smsfulltext = "Пропуск*"+pt+"*"+it+"*"+ps+"*"+pn+"*"+vn+"*"+tn+"*"+sn+"*"+ji+"*"+jn;
            }
            break;
    case 2: document.getElementById('job_inn').disabled = true;
            document.getElementById('job_name').disabled = true;
	    document.getElementById('birthday').disabled = false;
	    document.getElementById('hospital').disabled = false;
	    document.getElementById('reason').disabled = true;
	    document.getElementById('dest_address').disabled = true;
	    if (bd == "" || hs == "" || ps == "" || pn == ""){ 
              smsfulltext = "Недостаточно данных";
            } else {
              smsfulltext = "Пропуск*"+pt+"*"+it+"*"+ps+"*"+pn+"*"+bd+"*"+vn+"*"+tn+"*"+sn+"*"+hs;
            }
            break;
    case 3: document.getElementById('job_inn').disabled = true;
            document.getElementById('job_name').disabled = true;
	    document.getElementById('birthday').disabled = true;
	    document.getElementById('hospital').disabled = true;
	    document.getElementById('reason').disabled = false;
	    document.getElementById('dest_address').disabled = false;
	    if (rs == "" || da == "" || ps == "" || pn == ""){ 
              smsfulltext = "Недостаточно данных";
            } else {
              smsfulltext = "Пропуск*"+pt+"*"+it+"*"+ps+"*"+pn+"*"+vn+"*"+tn+"*"+sn+"*"+rs+"*"+da;
            }
            break;
   }

   document.getElementById('smstext').textContent = smsfulltext;
}
</script>
</head>
<body onload="form_pass()"> 

<p align=center><a href="#" onclick="toggle_visibility('aq');">Информация о странице</a></p>
<div id="aq" style="display:none">
<p align = center><b>Это вообще что?</b>
<br>На этой странице можно сформировать SMS и отправить его потом со своего телефона на номер 7377, чтобы<br>получить пропуск для передвижения по Москве и МО во время эпидемии коронавируса.</p>
<p align = center><b>Так это можно без проблем сделать в приложении, разве нет?</b>
<br>Можно. Эта страница - для тех у кого нет учётки на портале госуслуг, подтвержденного телефонного номера<br>в этой учётке, или, например, смартфона: для МО единственный способ получить пропуск, если у тебя телефон кнопочный<br>и в него нельзя сохранить графический QR-код - это SMS на _московский_ номер 7377.<br>SMS-номер 0250 для Московской области пока (на 16.04) не работает. Да, пропуск с номера 7377 годится для МО - я на горячей линии МО узнавал.</p>
<p align = center><b>Я оставлю здесь свои паспортные данные, а потом на меня кредитов наоформят!</b>
<br>Нет. Эта страница вообще никуда не отправляет данные. Можете ее сохранить в файл и использовать на компьютере, вообще не подключенном к Интернет.</p>
<p align = center><b>А чего всё такое кривое-то???</b>
<br>Я не умею в создание сайтов, html, css и прочее. Это я сделал на коленке по памяти на багаже знаний, устаревших лет на 15-20. Можете сделать лучше? Пришлите на egor@regedit.ru, я размещу.</p>
</div>

<table border=1 width=800 align=center>

<tr><td>Тип пропуска
<br><input name="pass_type" id="pass_type1" type="radio" value="1" checked onChange="form_pass()">Для работающих
<br><input name="pass_type" id="pass_type2" type="radio" value="2" onChange="form_pass()">Для разового посещения медицинской организации
<br><input name="pass_type" id="pass_type3" type="radio" value="3" onChange="form_pass()">Для иных целей</td>

<td>Тип документа удостоверяющего личность
<br><input name="passport_type" id="passport_type_1" type="radio" value="1" checked>Паспорт РФ
<br><input name="passport_type" id="passport_type_2" type="radio" value="2">Паспорт не РФ
<br><input name="passport_type" id="passport_type_3" type="radio" value="3">Иной документ
</td>

<td>Данные документа, удостоверяющего личность
<br>Серия <input type="text" id="passport_ser" size="4">, номер <input type="text" id="passport_num" size="6"></td></tr>

<tr><td>Госномер автомобиля<br><font size="-1" color="gray">(оставьте пустым, если не используется. буквы вводите русским алфавитом.)</font>
<br><input type="text" id="vehicle_reg_num" size="9"></td>

<td>Номер карты "Тройка" без пробелов<br><font size="-1" color="gray">(оставьте пустым, если не используется)</font>
<br><input type="text" id="troyka_num" size="10"></td>

<td>Номер карты "Стрелка" без пробелов<br><font size="-1" color="gray">(оставьте пустым, если не используется)</font>
<br><input type="text" id="strelka_num" size="11"></td></tr>

<tr><td>ИНН организации - вашей работы<br><font size="-1" color="gray">(можно не заполнять, если работаете в медицинской организации)</font>
<br><input type="text" id="job_inn" size="15"></td>

<td colspan=2>Наименование организации - вашей работы<br><font size="-1" color="gray">(например, ООО "Ромашка")</font>
<br><input type="text" id="job_name" size="70"></td></tr>

<tr><td>Дата рождения<br><font size="-1" color="gray">(в формате ДД.ММ.ГГГГ, через точки, например 31.01.1970)</font>
<br><input type="text" id="birthday" size="15"></td>

<td colspan=2>Наименование медицинской организации<br><font size="-1" color="gray">(можно в краткой форме, например: ГКБ-15)</font>
<br><input type="text" id="hospital" size="50"></td></tr>

<tr><td>Цель выхода<br><font size="-1" color="gray">(например - "за продуктами" или "на дачу" (без кавычек)</font>
<br><input type="text" id="reason" size="20"></td>

<td colspan=2>Адрес, куда направляетесь<br><font size="-1" color="gray">(например - Балашиха, ш. Энтузиастов, 60)</font>
<br><input type="text" id="dest_address" size="50"></td></tr>

<tr><td align=center colspan=3><input type=button value=" Сгенерировать текст SMS-сообщения на номер 7377 " onclick="form_pass()" size=50></td></tr>

</table>
<hr>
<table border=1 align=center  width=800>
<tr><td width=200>Текст SMS, которое следует отправить на 7377,<br>чтоб получить пропуск:</td><td><p id="smstext"><font size+2 family=Courier color=red><font>Недостаточно данных</font></p></td></tr>
<tr><td align=center valign=center colspan=2><br><b>Политика обработки данных: все данные остаются на вашем компьютере и никуда не пересылаются. Сервер не принимает и не хранит ничего из того, что вы здесь вводите. Не использует куки и счетчики.</b></td></tr>
</table>

</body>
